   <!--[if lte ie 7]>
      <style type="text/css" media="screen">
        /* Move these to your IE6/7 specific stylesheet if possible */
        .uniForm, .uniForm fieldset, .uniForm .ctrlHolder, .uniForm .formHint, .uniForm .buttonHolder, .uniForm .ctrlHolder ul{ zoom:1; }
      </style>
    <![endif]-->

    <form action="javascript:submit();" class="uniForm">
        <fieldset>
        <h3>Set Image</h3>
        <div class="ctrlHolder">
          <label for=""><em>*</em>Roll number</label>
          <input name="rollno" id="rollno"  size="35" maxlength="50" type="text" class="textInput required"/>
          <p class="formHint">Roll number <span class="appBasis" >on above basis.</span></p>
        </div>
        <div class="ctrlHolder">
          <label for=""><em>*</em>Image number</label>
          <input name="image_no" id="image_no" data-default-value="e.g. 20110607001"  size="35" maxlength="50" type="text" class="textInput required validateAlphaNum"/>
          <p class="formHint">Input only image number generated by camera, avoid image extension etc</span></p>
        </div>
        <div id="submitStatus" style="display:none;" class="ui-state-highlight ui-corner-all" ></div>
        <br/>
        </fieldset>
      <div class="buttonHolder">
        <button type="reset" class="secondaryAction">Reset the form</button>
        <button type="submit" class="primaryAction">Update</button>
      </div>
    </form>
	<script>
	var urlCheckRollno = "<?php echo $this->url(array('controller' => 'validate', 'action' => 'rollno'))?>";
	var urlSubmit = "<?php echo $this->url(array('controller' => 'idimage', 'action' => 'setimage'))?>";
	var rollNo;
	var basis;
    $(function(){
        $('form.uniForm').uniform({
            prevent_submit : true
        });

        $('#rollno').change(function(){
    	  rollNo = $(this).val();
          $.ajax({
              url : urlCheckRollno,
              dataType : 'json',
              data : {roll_no: rollNo,
                  	  application_basis:basis},
              success: function(jStatus){
            	  if (jStatus){
                	  // skpi it continue;
            	  } else {
                	  alert('Candidate "'+rollNo+'" not found.');
            	  }
              },
                  error: function(response) {
                	  $('#errorBox').text(response.responseText).parent().show();
                      console.log(response);
                      }
                  });
        });
      });

    function submit() {
        $.ajax({
            url : urlSubmit,
            data : getValues(),
            success: function(jStatus){
                $( "#submitStatus" ).html('').html(jStatus).slideDown( 'blind', '', 'slow');
                $('#rollno').val('').focus();
            },
                error: function(response) {
              	  $('#errorBox').text(response.responseText).parent().show();
                    console.log(response);
                    }
                });
    }

    function getValues() {
        var formData = {}; 
        $('form.uniForm :input')
        		.not('button,:input[value^="e.g."]')
        		.each(function(){ 
        			formData[this.name] = this.value; 
            });
		return formData;
	}
    </script>
<?php
$this->headScript()->appendFile('http://' . CDN_SERVER . '/plugins/uni-form/js/uni-form-validation.jquery.js');
    
$this->headLink()->prependStylesheet(
'http://' . CDN_SERVER .  '/plugins/uni-form/css/uni-form.css');
$this->headLink()->prependStylesheet(
'http://' . CDN_SERVER .  '/plugins/uni-form/css/smooth.uni-form.css');
?>